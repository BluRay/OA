(function(A){A.fn.ligerAccordion=function(B){return this.each(function(){if(this.manager){return}var D={};D.accordion=A(this);this.manager=D;if(!D.accordion.hasClass("l-accordion-panel")){D.accordion.addClass("l-accordion-panel")}var C=0;if(A("> div[lselected=true]",D.tabs).length>0){C=A("> div",D.tabs).index(A("> div[lselected=true]",D.tabs))}A("> div",D.accordion).each(function(F,E){var G=A('<div class="l-accordion-header"><div class="l-accordion-toggle"></div><div class="l-accordion-header-inner"></div></div>');if(F==C){A(".l-accordion-toggle",G).addClass("l-accordion-toggle-open")}if(A(E).attr("title")){A(".l-accordion-header-inner",G).html(A(E).attr("title"))}A(E).before(G);if(!A(E).hasClass("l-accordion-content")){A(E).addClass("l-accordion-content")}});A(".l-accordion-toggle",D.accordion).each(function(){if(!A(this).hasClass("l-accordion-toggle-open")&&!A(this).hasClass("l-accordion-toggle-close")){A(this).addClass("l-accordion-toggle-close")}if(A(this).hasClass("l-accordion-toggle-close")){A(this).parent().next(".l-accordion-content").hide()}var E=D.accordion.height();A("> div",D.accordion).each(function(){if(!A(this).hasClass("l-accordion-content")){E=E-A(this).height()}});A(this).parent().next(".l-accordion-content").height(E)});A(".l-accordion-header",D.accordion).hover(function(){A(this).addClass("l-accordion-header-over")},function(){A(this).removeClass("l-accordion-header-over")});A(".l-accordion-toggle",D.accordion).hover(function(){if(A(this).hasClass("l-accordion-toggle-open")){A(this).addClass("l-accordion-toggle-open-over")}else{if(A(this).hasClass("l-accordion-toggle-close")){A(this).addClass("l-accordion-toggle-close-over")}}},function(){if(A(this).hasClass("l-accordion-toggle-open")){A(this).removeClass("l-accordion-toggle-open-over")}else{if(A(this).hasClass("l-accordion-toggle-close")){A(this).removeClass("l-accordion-toggle-close-over")}}}).click(function(){if(A(this).hasClass("l-accordion-toggle-close")){A(this).removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over").removeClass("l-accordion-toggle-open-over");A(this).addClass("l-accordion-toggle-open");A(this).parent().next(".l-accordion-content").show("fast");A(this).parent().next(".l-accordion-content").siblings(".l-accordion-content").hide("fast");A(this).parent().siblings(".l-accordion-header").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close")}})})}})(jQuery);(function(A){A.fn.ligerCheckBox=function(B){B=B||{};return this.each(function(){if(this.manager){return}if(A(this).hasClass("l-hidden")){return}var C={};C.input=A(this);C.link=A('<a class="l-checkbox"></a>');C.wrapper=C.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent();C.wrapper.prepend(C.link);if(B.css){C.wrapper.css(B.css)}this.manager=C;C.input.change(function(){if(this.checked){C.link.addClass("l-checkbox-checked")}else{C.link.removeClass("l-checkbox-checked");C.link.removeClass("l-checkbox-checkedover")}return true});C.link.click(function(){if(C.input.attr("disabled")){return false}if(B.onBeforeClick){if(!B.onBeforeClick(C.input[0])){return false}}C.input.trigger("click").trigger("change");return false}).hover(function(){if(A(this).hasClass("l-checkbox-checked")){A(this).addClass("l-checkbox-checkedover")}else{A(this).addClass("l-checkbox-over")}},function(){A(this).removeClass("l-checkbox-checkedover");A(this).removeClass("l-checkbox-over")});this.checked&&C.link.addClass("l-checkbox-checked")})}})(jQuery);(function(A){A.fn.ligerComboBox=function(B){B=B||{};B=A.extend({resize:true,isMultiSelect:false,isShowCheckBox:false,columns:false,selectBoxWith:false,selectBoxHeight:false,onBeforeSelect:false,onSelected:false,selectedText:false,selectedValue:false,split:";"},B);if(!B.isShowCheckBox){B.isMultiSelect=false}if(B.columns){B.isShowCheckBox=true}return this.each(function(){if(this.manager){return}var D={init:function(){var E=null;if(B.initValue!=undefined){E=B.initValue;var F=D.findTextByValue(E);D.inputText.val(F);D.valueField.val(E);D.onChangedValue(E,F)}else{if(B.initText!=undefined){E=D.findValueByText(B.initText);D.inputText.val(B.initText);D.valueField.val(E);D.onChangedValue(E,B.initText)}}if(!B.isShowCheckBox&&E!=null){A("table tr",D.selectBox).find("td:first").each(function(){if(E==A(this).attr("value")){A(this).addClass("l-selected")}})}if(B.isShowCheckBox&&E!=null){A(":checkbox",D.selectBox).each(function(){var H=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){H=A(this).parent().parent()}else{H=A(this).parent()}if(H==null){return}var G=E.toString().split(B.split);A(G).each(function(I,J){if(J==H.attr("value")){A(".l-checkbox",H).addClass("l-checkbox-checked")}})})}},findTextByValue:function(E){if(E==undefined){return""}var F="";A(B.data).each(function(H,I){var J=B.valueField?I[B.valueField]:I[0];var G=B.displayField?I[B.displayField]:I[1];if(E==J){F+=G+B.split}});if(F.length>0){F=F.substr(0,F.length-1)}return F},findValueByText:function(F){if(!F&&F==""){return""}var E="";A(B.data).each(function(H,I){var J=B.valueField?I[B.valueField]:I[0];var G=B.displayField?I[B.displayField]:I[1];if(F==G){E+=J+B.split}});if(E.length>0){E=E.substr(0,E.length-1)}return E},onChangedValue:function(F,E){D.selectedText=E;D.selectedValue=F;if(B.onSelected){B.onSelected(F,E)}},changeValue:function(){var F="";var E="";A("input:checked",D.selectBox).each(function(){var G=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){G=A(this).parent().parent()}else{G=A(this).parent()}if(!G){return}F+=G.attr("value")+B.split;E+=G.attr("text")+B.split});if(F.length>0){F=F.substr(0,F.length-1)}if(E.length>0){E=E.substr(0,E.length-1)}this.valueField.val(F);this.inputText.val(E);D.onChangedValue(F,E)},bulidContent:function(){this.clearContent();if(D.select){this.setSelect()}else{if(B.data){this.setData(B.data)}}},clearContent:function(){A("table",D.selectBox).html("");D.inputText.val("");D.valueField.val("")},setSelect:function(){this.clearContent();A("option",D.select).each(function(F){var G=A(this).val();var E=A(this).html();A("table.l-table-nocheckbox",D.selectBox).append("<tr><td index='"+F+"' value='"+G+"'>"+E+"</td>")});A("td:eq("+D.select[0].selectedIndex+")",D.selectBox).each(function(){if(A(this).hasClass("l-selected")){D.selectBox.hide();return}A(".l-selected",D.selectBox).removeClass("l-selected");A(this).addClass("l-selected");if(D.select[0].selectedIndex!=A(this).attr("index")&&D.select[0].onchange){D.select[0].selectedIndex=A(this).attr("index");D.select[0].onchange()}var E=parseInt(A(this).attr("index"));D.select[0].selectedIndex=E;D.select.trigger("change");D.selectBox.hide();D.inputText.val(A(this).html())});this.addClickEven()},setData:function(K){this.clearContent();if(B.columns){D.selectBox.table.headrow=A("<tr class='l-table-headerow'><td width='18px'></td></tr>");D.selectBox.table.append(D.selectBox.table.headrow);D.selectBox.table.addClass("l-box-select-grid");for(var I=0;I<B.columns.length;I++){var H=A("<td columnindex='"+I+"' columnname='"+B.columns[I].name+"'>"+B.columns[I].header+"</td>");if(B.columns[I].width){H.width(B.columns[I].width)}D.selectBox.table.headrow.append(H)}}for(var E=0;E<K.length;E++){var J=B.valueField?K[E][B.valueField]:K[E][0];var F=B.displayField?K[E][B.displayField]:K[E][1];if(!B.columns){A("table.l-table-checkbox",D.selectBox).append("<tr><td style='width:18px;'  index='"+E+"' value='"+J+"' text='"+F+"' ><input type='checkbox' /></td><td index='"+E+"' value='"+J+"' align='left'>"+F+"</td>");A("table.l-table-nocheckbox",D.selectBox).append("<tr><td index='"+E+"' value='"+J+"' align='left'>"+F+"</td>")}else{var G=A("<tr><td style='width:18px;'  index='"+E+"' value='"+J+"' text='"+F+"' ><input type='checkbox' /></td></tr>");A("td",D.selectBox.table.headrow).each(function(){var M=A(this).attr("columnname");if(M){var L=A("<td>"+K[E][M]+"</td>");G.append(L)}});D.selectBox.table.append(G)}}if(B.isShowCheckBox&&A.fn.ligerCheckBox){A("table input:checkbox",D.selectBox).ligerCheckBox()}A(".l-table-checkbox input:checkbox",D.selectBox).change(function(){if(this.checked&&B.onBeforeSelect){var L=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){L=A(this).parent().parent()}else{L=A(this).parent()}if(L!=null&&!B.onBeforeSelect(L.attr("value"),L.attr("text"))){D.selectBox.slideToggle("fast");return false}}if(!B.isMultiSelect&&this.checked){A("input:checked",D.selectBox).not(this).each(function(){this.checked=false;A(".l-checkbox-checked",A(this).parent()).removeClass("l-checkbox-checked")});D.selectBox.slideToggle("fast")}D.changeValue()});this.addClickEven()},addClickEven:function(){A(".l-table-nocheckbox td",D.selectBox).click(function(){if(B.onBeforeSelect&&!B.onBeforeSelect(A(this).attr("value"),A(this).html())){D.selectBox.slideToggle("fast");return false}if(A(this).hasClass("l-selected")){D.selectBox.slideToggle("fast");return}A(".l-selected",D.selectBox).removeClass("l-selected");A(this).addClass("l-selected");if(D.select){if(D.select[0].selectedIndex!=A(this).attr("index")){var E=parseInt(A(this).attr("index"));D.select[0].selectedIndex=E;D.select.trigger("change")}}D.selectBox.slideToggle("fast");D.inputText.val(A(this).html());D.valueField.val(A(this).attr("value"));D.onChangedValue(A(this).attr("value"),A(this).html())})},onToggleSelectBox:function(){D.selectBox.slideToggle("fast",function(){if(!B.isShowCheckBox){var E=(A("td.l-selected",D.selectBox).offset().top-D.selectBox.offset().top);A(".l-box-select-inner",D.selectBox).animate({scrollTop:E})}})},inputText:null,select:null,textFieldID:"",valueFieldID:"",valueField:null};D.valueField=A('<input type="hidden"/>');this.manager=D;if(this.tagName.toLowerCase()=="input"&&this.type&&this.type=="text"){this.readOnly=true;D.inputText=A(this);if(this.id){D.textFieldID=this.id}}else{D.inputText=A('<input type="text"/>');D.inputText[0].readOnly=true;if(this.tagName.toLowerCase()=="select"){A(this).addClass("l-hidden");D.select=A(this);B.isMultiSelect=false;B.isShowCheckBox=false;D.inputText.insertAfter(A(this))}else{D.inputText.appendTo(A(this))}}if(D.textFieldID==""&&B.textFieldID){D.textFieldID=B.textFieldID}if(D.textFieldID!=""){D.inputText[0].id=D.inputText[0].name=D.textFieldID}if(B.valueFieldID){D.valueField[0].id=D.valueField[0].name=B.valueFieldID}else{if(D.textFieldID!=""){D.valueField[0].id=D.valueField[0].name=D.textFieldID+"_val"}}D.link=A('<div class="l-trigger"><div class="l-trigger-icon"></div></div>');D.selectBox=A('<div class="l-box-select"><div class="l-box-select-inner"><table cellpadding="0" cellspacing="0" border="0"></table></div></div>');D.selectBox.table=A("table",D.selectBox);D.wrapper=D.inputText.wrap('<div class="l-text"></div>').parent();D.wrapper.append(D.link).after(D.selectBox).after(D.valueField);if(!D.inputText.hasClass("l-text-field")){D.inputText.addClass("l-text-field")}if(B.width){D.wrapper.css({width:B.width});D.inputText.css({width:B.width-20})}if(B.height){D.wrapper.height(B.height);D.inputText.height(B.height-2);D.link.height(B.height-4)}if(B.isShowCheckBox&&!D.select){A("table",D.selectBox).addClass("l-table-checkbox")}else{A("table",D.selectBox).addClass("l-table-nocheckbox")}if(B.resize&&A.fn.ligerResizable){D.selectBox.ligerResizable({handles:"se,s"});D.selectBox.append("<div class='l-btn-nw-drop'></div>")}D.link.hover(function(){this.className="l-trigger-hover"},function(){this.className="l-trigger"}).mousedown(function(){this.className="l-trigger-pressed"}).mouseup(function(){this.className="l-trigger-hover"}).click(function(){D.onToggleSelectBox()});D.inputText.click(function(){D.onToggleSelectBox()});D.bulidContent();D.init();if(B.selectBoxWith){D.selectBox.width(B.selectBoxWith)}else{D.selectBox.css("width",D.wrapper.css("width"))}var C=A("tr",D.selectBox.table).length;if(!B.selectBoxHeight&&C<8){B.selectBoxHeight=C*30}if(B.selectBoxHeight){D.selectBox.height(B.selectBoxHeight)}})}})(jQuery);(function(A){A.fn.ligerDateEditor=function(B){B=B||{};B=A.extend({dayMessage:["日","一","二","三","四","五","六"],monthMessage:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],todayMessage:"今天",closeMessage:"关闭",format:"yyyy-MM-dd hh:mm",showTime:false,onChangeDate:false},B);if(!B.showTime&&B.format.indexOf(" hh:mm")>-1){B.format=B.format.replace(" hh:mm","")}return this.each(function(){if(this.manager){return}if(this.tagName.toLowerCase()!="input"||this.type!="text"){return}var E={bulidContent:function(){var H=new Date(E.currentDate.year,E.currentDate.month-1,1).getDay();var F=E.currentDate.month;var G=E.currentDate.year;if(++F==13){F=1;G++}var I=new Date(G,F-1,0).getDate();var J=new Date(E.currentDate.year,E.currentDate.month-1,0).getDate();E.buttons.btnMonth.html(B.monthMessage[E.currentDate.month-1]);E.buttons.btnYear.html(E.currentDate.year);E.toolbar.time.hour.html(E.currentDate.hour);E.toolbar.time.minute.html(E.currentDate.minute);if(E.toolbar.time.hour.html().length==1){E.toolbar.time.hour.html("0"+E.toolbar.time.hour.html())}if(E.toolbar.time.minute.html().length==1){E.toolbar.time.minute.html("0"+E.toolbar.time.minute.html())}A("td",this.body.tbody).each(function(){this.className=""});A("tr",this.body.tbody).each(function(L,K){A("td",K).each(function(P,N){var M=L*7+(P-H);var O=M+1;if(E.selectedDate&&E.currentDate.year==E.selectedDate.year&&E.currentDate.month==E.selectedDate.month&&M+1==E.selectedDate.date){if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday")}A(N).addClass("l-box-dateeditor-selected");A(N).siblings().removeClass("l-box-dateeditor-selected")}else{if(E.currentDate.year==E.now.year&&E.currentDate.month==E.now.month&&M+1==E.now.date){if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday")}A(N).addClass("l-box-dateeditor-today")}else{if(M<0){O=J+O;A(N).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")}else{if(M>I-1){O=O-I;A(N).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")}else{if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected")}else{N.className=""}}}}}A(N).html(O)})})},showDate:function(){if(!this.selectedDate){return}var F=E.selectedDate.year+"/"+E.selectedDate.month+"/"+E.selectedDate.date;this.currentDate.hour=parseInt(E.toolbar.time.hour.html());this.currentDate.minute=parseInt(E.toolbar.time.minute.html());if(B.showTime){F+=" "+this.currentDate.hour+":"+this.currentDate.minute}this.inputText.val(F);this.inputText.trigger("change")},isDateTime:function(G){var F=G.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(F==null){return false}var H=new Date(F[1],F[3]-1,F[4]);if(H=="NaN"){return false}return(H.getFullYear()==F[1]&&(H.getMonth()+1)==F[3]&&H.getDate()==F[4])},isLongDateTime:function(H){var G=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var F=H.match(G);if(F==null){return false}var I=new Date(F[1],F[3]-1,F[4],F[5],F[6]);if(I=="NaN"){return false}return(I.getFullYear()==F[1]&&(I.getMonth()+1)==F[3]&&I.getDate()==F[4]&&I.getHours()==F[5]&&I.getMinutes()==F[6])},getFormatDate:function(H){if(H=="NaN"){return null}var G=B.format;var I={"M+":H.getMonth()+1,"d+":H.getDate(),"h+":H.getHours(),"m+":H.getMinutes(),"s+":H.getSeconds(),"q+":Math.floor((H.getMonth()+3)/3),"S":H.getMilliseconds()};if(/(y+)/.test(G)){G=G.replace(RegExp.$1,(H.getFullYear()+"").substr(4-RegExp.$1.length))}for(var F in I){if(new RegExp("("+F+")").test(G)){G=G.replace(RegExp.$1,RegExp.$1.length==1?I[F]:("00"+I[F]).substr((""+I[F]).length))}}return G},onTextChange:function(){var G=E.inputText.val();if(!B.showTime&&!E.isDateTime(G)){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}else{if(B.showTime&&!E.isLongDateTime(G)){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}else{while(G.indexOf("-")>-1){G=G.replace("-","/")}var F=E.getFormatDate(new Date(G));if(F==null){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}E.usedDate=new Date(G);E.selectedDate={year:E.usedDate.getFullYear(),month:E.usedDate.getMonth()+1,day:E.usedDate.getDay(),date:E.usedDate.getDate(),hour:E.usedDate.getHours(),minute:E.usedDate.getMinutes()};E.currentDate={year:E.usedDate.getFullYear(),month:E.usedDate.getMonth()+1,day:E.usedDate.getDay(),date:E.usedDate.getDate(),hour:E.usedDate.getHours(),minute:E.usedDate.getMinutes()};E.inputText.val(F);if(B.onChangeDate){B.onChangeDate(F)}if(A(E.dateeditor).is(":visible")){E.bulidContent()}}}}};this.manager=E;E.inputText=A(this);if(!E.inputText.hasClass("l-text-field")){E.inputText.addClass("l-text-field")}E.link=A('<div class="l-trigger"><div class="l-trigger-icon"></div></div>');E.text=E.inputText.wrap('<div class="l-text"></div>').parent();E.text.append(E.link);if(B.width){E.text.css({width:B.width});E.inputText.css({width:B.width-20})}var C="";C+="<div class='l-box-dateeditor' style='display:none'>";C+="    <div class='l-box-dateeditor-header'>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'><span></span></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'><span></span></div>";C+="        <div class='l-box-dateeditor-header-text'><a class='l-box-dateeditor-header-month'></a> , <a  class='l-box-dateeditor-header-year'></a></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'><span></span></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'><span></span></div>";C+="    </div>";C+="    <div class='l-box-dateeditor-body'>";C+="        <table cellpadding='0' cellspacing='0' border='0' class='l-box-dateeditor-calendar'>";C+="            <thead>";C+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";C+="            </thead>";C+="            <tbody>";C+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";C+="            </tbody>";C+="        </table>";C+="        <ul class='l-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="    </div>";C+="    <div class='l-box-dateeditor-toolbar'>";C+="        <div class='l-box-dateeditor-time'></div>";C+="        <div class='l-button l-button-today'></div>";C+="        <div class='l-button l-button-close'></div>";C+="        <div class='l-clear'></div>";C+="    </div>";C+="</div>";E.dateeditor=A(C);E.text.after(E.dateeditor);E.header=A(".l-box-dateeditor-header",E.dateeditor);E.body=A(".l-box-dateeditor-body",E.dateeditor);E.toolbar=A(".l-box-dateeditor-toolbar",E.dateeditor);E.body.thead=A("thead",E.body);E.body.tbody=A("tbody",E.body);E.body.monthselector=A(".l-box-dateeditor-monthselector",E.body);E.body.yearselector=A(".l-box-dateeditor-yearselector",E.body);E.body.hourselector=A(".l-box-dateeditor-hourselector",E.body);E.body.minuteselector=A(".l-box-dateeditor-minuteselector",E.body);E.toolbar.time=A(".l-box-dateeditor-time",E.toolbar);E.toolbar.time.hour=A("<a></a>");E.toolbar.time.minute=A("<a></a>");E.buttons={btnPrevYear:A(".l-box-dateeditor-header-prevyear",E.header),btnNextYear:A(".l-box-dateeditor-header-nextyear",E.header),btnPrevMonth:A(".l-box-dateeditor-header-prevmonth",E.header),btnNextMonth:A(".l-box-dateeditor-header-nextmonth",E.header),btnYear:A(".l-box-dateeditor-header-year",E.header),btnMonth:A(".l-box-dateeditor-header-month",E.header),btnToday:A(".l-button-today",E.toolbar),btnClose:A(".l-button-close",E.toolbar)};var D=new Date();E.now={year:D.getFullYear(),month:D.getMonth()+1,day:D.getDay(),date:D.getDate(),hour:D.getHours(),minute:D.getMinutes()};E.currentDate={year:D.getFullYear(),month:D.getMonth()+1,day:D.getDay(),date:D.getDate(),hour:D.getHours(),minute:D.getMinutes()};E.selectedDate=null;E.usedDate=null;A("td",E.body.thead).each(function(G,F){A(F).html(B.dayMessage[G])});A("li",E.body.monthselector).each(function(G,F){A(F).html(B.monthMessage[G])});E.buttons.btnToday.html(B.todayMessage);E.buttons.btnClose.html(B.closeMessage);if(B.showTime){E.toolbar.time.show();E.toolbar.time.append(E.toolbar.time.hour).append(":").append(E.toolbar.time.minute);A("li",E.body.hourselector).each(function(G,H){var F=G;if(G<10){F="0"+G.toString()}A(this).html(F)});A("li",E.body.minuteselector).each(function(G,H){var F=G;if(G<10){F="0"+G.toString()}A(this).html(F)})}E.bulidContent();E.onTextChange();E.link.hover(function(){this.className="l-trigger-hover"},function(){this.className="l-trigger"}).mousedown(function(){this.className="l-trigger-pressed"}).mouseup(function(){this.className="l-trigger-hover"}).click(function(){E.bulidContent();E.dateeditor.slideToggle("fast")});E.buttons.btnClose.click(function(){E.dateeditor.slideToggle("fast")});A("td",E.body.tbody).hover(function(){if(A(this).hasClass("l-box-dateeditor-today")){return}A(this).addClass("l-box-dateeditor-over")},function(){A(this).removeClass("l-box-dateeditor-over")}).click(function(){A(".l-box-dateeditor-selected",E.body.tbody).removeClass("l-box-dateeditor-selected");if(!A(this).hasClass("l-box-dateeditor-today")){A(this).addClass("l-box-dateeditor-selected")}E.currentDate.date=parseInt(A(this).html());E.currentDate.day=new Date(E.currentDate.year,E.currentDate.month-1,1).getDay();if(A(this).hasClass("l-box-dateeditor-out")){if(A("tr",E.body.tbody).index(A(this).parent())==0){if(--E.currentDate.month==0){E.currentDate.month=12;E.currentDate.year--}}else{if(++E.currentDate.month==13){E.currentDate.month=1;E.currentDate.year++}}}E.selectedDate={year:E.currentDate.year,month:E.currentDate.month,date:E.currentDate.date};E.showDate();E.dateeditor.slideToggle()});A(".l-box-dateeditor-header-btn",E.header).hover(function(){A(this).addClass("l-box-dateeditor-header-btn-over")},function(){A(this).removeClass("l-box-dateeditor-header-btn-over")});E.buttons.btnYear.click(function(){if(!E.body.yearselector.is(":visible")){A("li",E.body.yearselector).each(function(F,G){var H=E.currentDate.year+(F-4);if(H==E.currentDate.year){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}A(this).html(H)})}E.body.yearselector.slideToggle()});E.body.yearselector.hover(function(){},function(){A(this).slideUp()});A("li",E.body.yearselector).click(function(){E.currentDate.year=parseInt(A(this).html());E.body.yearselector.slideToggle();E.bulidContent()});E.buttons.btnMonth.click(function(){A("li",E.body.monthselector).each(function(F,G){if(E.currentDate.month==F+1){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.monthselector.slideToggle()});E.body.monthselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.monthselector).click(function(){var F=A("li",E.body.monthselector).index(this);E.currentDate.month=F+1;E.body.monthselector.slideToggle();E.bulidContent()});E.toolbar.time.hour.click(function(){A("li",E.body.hourselector).each(function(F,G){if(E.currentDate.hour==F){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.hourselector.slideToggle()});E.body.hourselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.hourselector).click(function(){var F=A("li",E.body.hourselector).index(this);E.currentDate.hour=F;E.body.hourselector.slideToggle();E.bulidContent()});E.toolbar.time.minute.click(function(){A("li",E.body.minuteselector).each(function(F,G){if(E.currentDate.minute==F){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.minuteselector.slideToggle("fast",function(){var F=A("li",this).index(A("li.l-selected",this));if(F>29){var G=(A("li.l-selected",this).offset().top-A(this).offset().top);A(this).animate({scrollTop:G})}})});E.body.minuteselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.minuteselector).click(function(){var F=A("li",E.body.minuteselector).index(this);E.currentDate.minute=F;E.body.minuteselector.slideToggle("fast");E.bulidContent()});E.buttons.btnPrevMonth.click(function(){if(--E.currentDate.month==0){E.currentDate.month=12;E.currentDate.year--}E.bulidContent()});E.buttons.btnNextMonth.click(function(){if(++E.currentDate.month==13){E.currentDate.month=1;E.currentDate.year++}E.bulidContent()});E.buttons.btnPrevYear.click(function(){E.currentDate.year--;E.bulidContent()});E.buttons.btnNextYear.click(function(){E.currentDate.year++;E.bulidContent()});E.buttons.btnToday.click(function(){E.currentDate={year:E.now.year,month:E.now.month,day:E.now.day,date:E.now.date};E.selectedDate={year:E.now.year,month:E.now.month,day:E.now.day,date:E.now.date};E.showDate();E.dateeditor.slideToggle("fast")});E.inputText.change(function(){E.onTextChange()})})}})(jQuery);(function(A){A.fn.ligerDrag=function(B){B=A.extend({onStartDrag:false,onDrag:false,onStopDrag:false},B||{});return this.each(function(){var C={start:function(D){A("body").css("cursor","move");C.current={target:C.target,left:C.target.offset().left,top:C.target.offset().top,startX:D.pageX||D.screenX,startY:D.pageY||D.clientY};A(document).bind("mouseup",C.stop);A(document).bind("mousemove",C.drag);if(B.onStartDrag){B.onStartDrag(C.current,D)}},drag:function(F){var D=F.pageX||F.screenX;var E=F.pageY||F.screenY;C.current.diffX=D-C.current.startX;C.current.diffY=E-C.current.startY;if(B.onDrag){if(B.onDrag(C.current,F)!=false){C.applyDrag()}}else{C.applyDrag()}},stop:function(D){A(document).unbind("mousemove",C.drag);A(document).unbind("mouseup",C.stop);A("body").css("cursor","");if(B.onStopDrag){B.onStopDrag(C.current,D)}C.current=null},applyDrag:function(){if(C.current.diffX){C.target.css("left",(C.current.left+C.current.diffX))}if(C.current.diffY){C.target.css("top",(C.current.top+C.current.diffY))}}};C.target=A(this);if(B.handler==undefined||B.handler==null){C.handler=A(this)}else{C.handler=(typeof B.handler=="string"?A(B.handler,this):B.handle)}C.handler.hover(function(){A("body").css("cursor","move")},function(){A("body").css("cursor","")}).mousedown(function(D){C.start(D);return false})})}})(jQuery);(function(A){A.fn.ligerFrom=function(B){B=B||{};return this.each(function(){A(":text[ltype=text]",this).ligerTextBox();A("select",this).ligerComboBox();A(":text[ltype=int]",this).ligerSpinner({type:"int"});A(":text[ltype=date]",this).ligerDateEditor();A("input:radio",this).ligerRadio();A("input:checkbox",this).ligerCheckBox()})}})(jQuery);(function(A){A.fn.ligerFrame=function(B){B=B||{};return this.each(function(){if(this.manager){return}var C={leftWidth:180,rightWidth:600,onWindowResize:function(){var D=A(document).height()-A(".l-frame-top",C.body).height()-A(".l-frame-footer",C.body).height()-4;A(".l-frame-main",C.body).height(D);C.rightWidth=A(".l-frame-main",C.body).width();A(".l-frame-left",C.body).css({width:C.leftWidth,left:4,height:D-10});if(A(".l-frame-left",C.body).is(":visible")){C.rightWidth=C.rightWidth-parseInt(A(".l-frame-left",C.body).css("width"))-16}A(".l-frame-right",C.body).css({width:C.rightWidth,left:4+1+C.leftWidth+1+4,height:D-10});A(".l-frame-content",C.body).css({height:D-A(".l-frame-pages").height()});A(".l-frame-drophandle",C.body).css({left:4+1+C.leftWidth+1});A(".l-frame-left-content",C.left).height(D-C.left.header.height()-8);C.setTabButton()},setTabButton:function(){var D=0;A(".l-frame-pages-tabs li",C.body).each(function(){D+=A(this).width()+2});var E=A(".l-frame-right",C.body).width();if(D>E){A(".l-frame-pages",C.right).append('<div class="l-frame-pages-left"></div><div class="l-frame-pages-right"></div>');C.setTabButtonEven();return true}else{A(".l-frame-pages-tabs",C.body).animate({left:0});A(".l-frame-pages-left,.l-frame-pages-right",C.right).remove();return false}},setTabButtonEven:function(){A(".l-frame-pages-left",C.right).hover(function(){A(this).addClass("l-frame-pages-left-over")},function(){A(this).removeClass("l-frame-pages-left-over")}).click(function(){C.moveToPrevTabItem()});A(".l-frame-pages-right",C.right).hover(function(){A(this).addClass("l-frame-pages-right-over")},function(){A(this).removeClass("l-frame-pages-right-over")}).click(function(){C.moveToNextTabItem()})},moveToLastTabItem:function(){var D=0;A(".l-frame-pages-tabs li",C.body).each(function(){D+=A(this).width()+2});var E=A(".l-frame-right",C.body).width();if(D>E){var F=A(".l-frame-pages-right",C.body).width();A(".l-frame-pages-tabs",C.body).animate({left:-1*(D-E+F+2)})}},isTabItemExist:function(D){return A(".l-frame-pages-tabs li[tabid="+D+"]",C.body).length>0},addTabItem:function(G,D,I,E){if(C.isTabItemExist(G)){C.selectTabItem(G);return}var H=A("<li><a></a><div class='l-frame-pages-tabs-item-left'></div><div class='l-frame-pages-tabs-item-right'></div><div class='l-frame-pages-tabs-item-close'></div></li>");var F=A("<div class='l-frame-content-item'><iframe frameborder='0'></iframe></div>");H.attr("tabid",G);F.attr("tabid",G);A("iframe",F).attr("name",G);if(E==undefined){E=true}if(E==false){A(".l-frame-pages-tabs-item-close",H).remove()}A("a",H).text(I);A("iframe",F).attr("src",D);A(".l-frame-pages-tabs",C.body).append(H);A(".l-frame-content",C.body).append(F);C.selectTabItem(G);if(C.setTabButton()){C.moveToLastTabItem()}H.click(function(){var J=A(this).attr("tabid");C.selectTabItem(J)});A(".l-frame-pages-tabs-item-close",H).hover(function(){A(this).addClass("l-frame-pages-tabs-item-close-over")},function(){A(this).removeClass("l-frame-pages-tabs-item-close-over")}).click(function(){var J=A(this).parent().attr("tabid");C.removeTabItem(J)})},removeTabItem:function(D){var E=A(".l-frame-pages-tabs li[tabid="+D+"]",C.body).hasClass("l-selected");if(E){A(".l-frame-content div[tabid="+D+"]",C.body).prev().show();A(".l-frame-pages-tabs li[tabid="+D+"]",C.body).prev().addClass("l-selected").siblings().removeClass("l-selected")}A(".l-frame-content div[tabid="+D+"]",C.body).remove();A(".l-frame-pages-tabs li[tabid="+D+"]",C.body).remove();C.setTabButton()},selectTabItem:function(D){C.selectedTabId=D;A(".l-frame-content div[tabid="+D+"]",C.body).show().siblings().hide();A(".l-frame-pages-tabs li[tabid="+D+"]",C.body).addClass("l-selected").siblings().removeClass("l-selected")},moveToPrevTabItem:function(){var G=A(".l-frame-pages-left",C.body).width();var D=new Array();A(".l-frame-pages-tabs li",C.body).each(function(I,J){var H=-1*G;if(I>0){H=parseInt(D[I-1])+A(this).prev().width()+2}D.push(H)});var F=-1*parseInt(A(".l-frame-pages-tabs",C.body).css("left"));for(var E=0;E<D.length-1;E++){if(D[E]<F&&D[E+1]>=F){A(".l-frame-pages-tabs",C.body).animate({left:-1*parseInt(D[E])});return}}},moveToNextTabItem:function(){var F=A(".l-frame-pages-right",C.body).width();var K=0;A(".l-frame-pages-tabs li",C.right).each(function(){K+=A(this).width()+2});var G=C.right.width();var J=new Array();var I=A(".l-frame-pages-tabs li",C.right);for(var D=I.length-1;D>=0;D--){var E=K-G+F+2;if(D!=I.length-1){E=parseInt(J[I.length-2-D])-A(I[D+1]).width()-2}J.push(E)}var H=-1*parseInt(A(".l-frame-pages-tabs",C.body).css("left"));for(var D=1;D<J.length;D++){if(J[D]<=H&&J[D-1]>H){A(".l-frame-pages-tabs",C.body).animate({left:-1*parseInt(J[D-1])});return}}},dragStart:function(F,E,D){if(F=="leftresize"){C.leftresize={startX:E.pageX};C.draggingline.css({left:E.pageX-C.body.offset().left}).show();A("body").css("cursor","col-resize")}A.fn.ligerNoSelect&&A("body").ligerNoSelect()},dragMove:function(E){if(C.leftresize){var D=E.pageX-this.leftresize.startX;C.leftresize.diff=D;C.draggingline.css({left:E.pageX-C.body.offset().left});A("body").css("cursor","col-resize")}},dragEnd:function(D){if(C.leftresize){C.leftWidth+=C.leftresize.diff;C.rightWidth-=C.leftresize.diff;C.onWindowResize();C.draggingline.hide();C.leftresize=false}A("body").css("cursor","default");A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)}};this.manager=C;C.body=A(this);C.main=A(".l-frame-main",C.body);C.left=A(".l-frame-left",C.body);C.left.header=A(".l-frame-left-header",C.left);if(C.left.header.length==0){C.left.header=A('<div class="l-frame-left-header"><div class="l-frame-left-header-toggle"></div><div class="l-accordion-header-inner"></div></div>');C.left.prepend(C.left.header);if(B.leftHeader){A(".l-accordion-header-inner",C.left.header).html(B.leftHeader)}}C.right=A(".l-frame-right",C.body);if(C.right.length==0){C.right=A('<div class="l-frame-right"><div class="l-frame-pages"><div class="l-frame-pages-left"></div><div class="l-frame-pages-right"></div><ul class="l-frame-pages-tabs"></ul></div><div class="l-frame-content"> </div></div>');C.main.append(C.right)}C.collapse=A(".l-frame-collapse",C.body);if(C.collapse.length==0){C.collapse=A('<div class="l-frame-collapse"><div class="l-frame-collapse-toggle"></div></div>');C.main.append(C.collapse)}C.collapse.toggle=A(".l-frame-collapse-toggle",C.collapse);C.drophandle=A(".l-frame-drophandle",C.body);if(C.drophandle.length==0){C.drophandle=A('<div class="l-frame-drophandle"></div>');C.main.append(C.drophandle)}C.draggingline=A(".l-frame-dragging-line",C.body);if(C.draggingline.length==0){C.draggingline=A('<div class="l-frame-dragging-line"></div>');C.main.append(C.draggingline)}if(!jQuery.support.boxModel){C.leftWidth=C.leftWidth-2}if(B.tabItems){A(B.tabItems).each(function(D,E){if(E.tabid&&E.url&&E.text){if(E.showClose==undefined){E.showClose=true}C.addTabItem(E.tabid,E.url,E.text,E.showClose)}})}A(".l-frame-left-header-toggle",C.body).hover(function(){A(this).addClass("l-frame-left-header-toggle-over")},function(){A(this).removeClass("l-frame-left-header-toggle-over")}).click(function(){C.left.animate({left:-1*C.leftWidth-6},function(){C.collapse.show();C.left.hide();C.drophandle.hide()});C.right.animate({left:"34px",width:C.main.width()-40})});C.collapse.toggle.click(function(){C.left.show();C.collapse.hide();C.drophandle.show();C.left.animate({left:"0px"},function(){C.onWindowResize()});C.right.animate({left:(C.left.width()+4)+"px"},function(){C.onWindowResize()})});C.onWindowResize();A(".l-frame-left-content",C.left).ligerAccordion();C.drophandle.mousedown(function(D){C.dragStart("leftresize",D,this)});C.collapse.hover(function(){A(this).addClass("l-frame-collapse-over")},function(){A(this).removeClass("l-frame-collapse-over")});C.collapse.toggle.hover(function(){A(this).addClass("l-frame-collapse-toggle-over")},function(){A(this).removeClass("l-frame-collapse-toggle-over")});A(".l-frame-pages-tabs li",C.right).click(function(){var D=A(this).attr("tabid");C.selectTabItem(D)});A(window).resize(function(){C.onWindowResize()});A(document).mousemove(function(D){C.dragMove(D)}).mouseup(function(D){C.dragEnd()}).hover(function(){},function(){C.dragEnd()})})};A.ligerFrame=function(B){A("body").ligerFrame(B)}})(jQuery);(function($){$.ligerAddGrid=function(grid,p){if(grid.manager){return}$(grid).hasClass("l-panel")||$(grid).addClass("l-panel");var gridHTML="";gridHTML+="        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>";gridHTML+="                    <div class='l-grid-loading'></div>";gridHTML+="                    <div class='l-grid-editor'></div>";gridHTML+="        <div class='l-panel-bwarp'>";gridHTML+="            <div class='l-panel-body'>";gridHTML+="                <div class='l-grid'>";gridHTML+="                    <div class='l-grid-dragging-line'></div>";gridHTML+="                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>";gridHTML+="                    <div class='l-grid-header'>";gridHTML+="                        <table class='l-grid-td-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table>";gridHTML+="                    </div>";gridHTML+="                    <div class='l-grid-scroller'>";gridHTML+="                        <div class='l-grid-body'>";gridHTML+="                        </div>";gridHTML+="                    </div>";gridHTML+="                 </div>";gridHTML+="              </div>";gridHTML+="         </div>";gridHTML+="         <div class='l-panel-bar'>";gridHTML+="            <div class='l-panel-bbar-inner'>";gridHTML+="            <div class='l-bar-group l-bar-selectpagesize'></div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'>";gridHTML+="                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>";gridHTML+="                    <div class='l-bar-button l-bar-btnprev'><span></span></div>";gridHTML+="                </div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'>";gridHTML+="                     <div class='l-bar-button l-bar-btnnext'><span></span></div>";gridHTML+="                    <div class='l-bar-button l-bar-btnlast'><span></span></div>";gridHTML+="                </div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'>";gridHTML+="                     <div class='l-bar-button l-bar-btnload'><span></span></div>";gridHTML+="                </div>";gridHTML+="                <div class='l-bar-separator'></div>";gridHTML+="                <div class='l-bar-group'><span class='l-bar-text'></span></div>";gridHTML+="            </div>";gridHTML+="         </div>";$(grid).html(gridHTML);var g={loadData:function(loadService){if(!p.newPage){p.newPage=1}if(p.dataAction=="server"){if(!p.sortOrder){p.sortOrder="asc"}}var param=[];if(p.dataAction=="server"){if(p.usePager){param.push({name:"page",value:p.newPage});param.push({name:"pagesize",value:p.pageSize})}if(p.sortName){param.push({name:"sortname",value:p.sortName});param.push({name:"sortorder",value:p.sortOrder})}}g.gridloading.show();this.loading=true;if(p.dataType=="local"){if(!g.data){g.data=$.extend({},p.data)}g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}else{if(p.dataAction=="local"&&g.data&&!loadService){g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}else{$.ajax({type:"POST",url:p.url,data:param,dataType:"json",success:function(data){g.data=$.extend({},data);if(p.dataAction=="server"){g.currentData=g.data;g.showData(g.currentData)}else{g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}},error:function(XMLHttpRequest,textStatus,errorThrown){try{if(p.onError){p.onError(XMLHttpRequest,textStatus,errorThrown)}}catch(e){}}})}}},showData:function(data){g.isDataChanged=false;$(".l-bar-btnloading",this.toolbar).removeClass("l-bar-btnloading");g.gridloading.hide();this.loading=false;p.total=data.Total;p.page=p.newPage;p.pageCount=Math.ceil(p.total/p.pageSize);this.buildPager();$(".l-grid-row,.l-grid-detailpanel,.l-grid-totalsummary",g.gridbody).remove();var rowlenth=data.Rows.length;$(data.Rows).each(function(i,item){if(!item){return}var row=$("<div class='l-grid-row' rowindex='"+i+"'><table class='l-grid-row-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table></div>");g.gridbody.append(row);if(!p.usePager&&i==rowlenth-1&&!g.isTotalSummary()){row.addClass("l-grid-row-last")}$(".l-grid-hd-cell",g.gridheader).each(function(headerCellIndex,headerCell){if($(headerCell).hasClass("l-grid-hd-cell-detail")){var rowCell=$("<td class='l-grid-row-cell l-grid-row-cell-detail'><div class='l-grid-row-cell-inner'><span></span></div></td>");rowCell.css("width",$(headerCell).css("width"));$("tr",row).append(rowCell);$("span",rowCell).click(function(){if($(this).hasClass("l-open")){$(this).removeClass("l-open");row.next(".l-grid-detailpanel").remove()}else{$(this).addClass("l-open");var detailPanel=$("<div class='l-grid-detailpanel'></div>");detailPanel.hide();row.after(detailPanel);p.detail.onShowDetail(item,detailPanel[0])}});return}columnname=$(headerCell).attr("columnname");columnindex=$(headerCell).attr("columnindex");var rowCell=$("<td class='l-grid-row-cell' columnindex='"+columnindex+"'><div class='l-grid-row-cell-inner'></div></td>");if($(headerCell).hasClass("l-grid-hd-cell-last")){rowCell.addClass("l-grid-row-cell-last")}var content="";var column=p.columns[columnindex];if(column&&column.align){$("> .l-grid-row-cell-inner",rowCell).css({textAlign:column.align})}if(column&&column.render){content=column.render(item)}else{if(columnname){if(column.type&&column.type=="date"){var date=p.renderDate(item[columnname]);item[columnname]=date;if(date!=null){if(column.format){content=g.getFormatDate(date,column.format)}else{content=g.getFormatDate(date,p.dateFormat)}}}else{content=item[columnname]}}}if(columnname){rowCell.attr({columnname:columnname})}$("> .l-grid-row-cell-inner",rowCell).html(content);$("tr",row).append(rowCell);rowCell.css("width",$(headerCell).css("width"));if(!$(this).is(":visible")){rowCell.hide()}})});g.onWindowResize();g.bulidTotalSummary();$(".l-grid-row",g.gridbody).hover(function(){$(this).addClass("l-grid-row-over")},function(){$(this).removeClass("l-grid-row-over")}).click(function(){if($(this).hasClass("l-grid-row-selected")){$(this).removeClass("l-grid-row-selected")}else{$(this).siblings(".l-grid-row-selected").removeClass("l-grid-row-selected");$(this).addClass("l-grid-row-selected")}});$(".l-grid-row-cell",g.gridbody).click(function(e){if(p.enabledEdit){g.applyEditor(e)}});if(p.onAfterShowData){p.onAfterShowData(grid)}},applyEditor:function(e){var obj=(e.target||e.srcElement);if(obj.href||obj.type){return true}var rowcell;if($(obj).hasClass("l-grid-row-cell")){rowcell=obj}if($(obj).parent().hasClass("l-grid-row-cell")){rowcell=$(obj).parent()[0]}if(!rowcell){return}var row=$(rowcell).parent().parent().parent().parent();var rowindex=$(row).attr("rowindex");var columnindex=$(rowcell).attr("columnindex");var columnname=$(rowcell).attr("columnname");var column=p.columns[columnindex];var left=$(rowcell).offset().left-g.body.offset().left;var top=$(rowcell).offset().top-$(grid).offset().top-2;g.grideditor.css({left:left,top:top,width:$(rowcell).css("width"),height:$(rowcell).css("height")}).html("");g.grideditor.editingCell=null;if(column.editor&&column.editor.type=="date"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.attr({style:"border:#6E90BE"}).val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerDateEditor({width:$(rowcell).width(),onChangeDate:function(newValue){$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}});g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&column.editor.type=="select"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.attr({style:"border:#6E90BE"}).val($(".l-grid-row-cell-inner",rowcell).html());var options={width:$(rowcell).width(),data:column.editor.data,isMultiSelect:false,onSelected:function(newValue,newText){$(rowcell).addClass("l-grid-row-cell-edited");if(column.editor.valueColumnName&&columnname){g.currentData.Rows[rowindex][columnname]=newText}g.updateData(rowcell,newValue);if(column.editor.render){$(obj).html(column.editor.render(g.currentData.Rows[rowindex]))}else{$(obj).html(newText)}}};if(column.editor.dataValueField){options.valueField=column.editor.dataValueField}if(column.editor.dataDisplayField){options.displayField=column.editor.dataDisplayField}if(column.editor.valueColumnName){options.initValue=g.currentData.Rows[rowindex][column.editor.valueColumnName]}else{if(columnname){options.initText=g.currentData.Rows[rowindex][columnname]}}$inputText.ligerComboBox(options);g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&column.editor.type=="int"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.attr({style:"border:#6E90BE"}).val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerSpinner({width:$(rowcell).width(),height:$(rowcell).height(),type:"int",onChangeValue:function(newValue){$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}});g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&column.editor.type=="text"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerTextBox({width:$(rowcell).width(),onChangeValue:function(newValue){$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}});g.grideditor.editingCell=rowcell;g.grideditor.show()}}}}},getFormatDate:function(date,dateformat){if(date=="NaN"){return null}var format=dateformat;var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format},deleteSelectedRow:function(){var row=$(".l-grid-row-selected",g.gridbody);g.deleteRow(row)},deleteRow:function(row){g.popup.hide();g.grideditor.html("").hide();var rowindex=row.attr("rowindex");$(row).remove();g.deleteData(rowindex);g.isDataChanged=true},deleteData:function(rowindex){g.currentData.Rows[rowindex].__status="delete"},updateData:function(cell,value){var columnindex=$(cell).attr("columnindex");var column=p.columns[columnindex];var columnname=column.name;var row=$(cell).parents(".l-grid-row:eq(0)");var rowindex=row.attr("rowindex");if(column.type&&column.type=="int"){g.currentData.Rows[rowindex][columnname]=parseInt(value)}else{if(column&&column.editor&&column.editor.type=="select"){g.currentData.Rows[rowindex][column.editor.valueColumnName?column.editor.valueColumnName:columnname]=value}else{g.currentData.Rows[rowindex][columnname]=value}}if(g.currentData.Rows[rowindex].__status==undefined){g.currentData.Rows[rowindex].__status="update"}g.isDataChanged=true},addRow:function(){var rowindex=g.currentData.Rows.length;g.currentData.Rows[rowindex]={};var rowdata=g.currentData.Rows[rowindex];if(!p.usePager&&!g.isTotalSummary()){$("> .l-grid-row:last",g.gridbody).removeClass("l-grid-row-last")}var row=$("<div class='l-grid-row' rowindex='"+rowindex+"'><table class='l-grid-row-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table></div>");g.gridbody.append(row);if(!p.usePager&&!g.isTotalSummary()){row.addClass("l-grid-row-last")}var celllength=$("tr > .l-grid-hd-cell",g.gridheader).length;$("tr > .l-grid-hd-cell",g.gridheader).each(function(headerCellIndex,headerCell){var columnname=$(headerCell).attr("columnname");var columnindex=$(headerCell).attr("columnindex");var column=p.columns[columnindex];var rowCell=$("<td class='l-grid-row-cell' columnindex='"+columnindex+"'><div class='l-grid-row-cell-inner'></div></td>");if(celllength==headerCellIndex+1){rowCell.addClass("l-grid-row-cell-last")}if(columnname){rowdata[columnname]="";if(column.type&&column.type=="int"){rowdata[columnname]=0}rowCell.attr({columnname:columnname})}$(".l-grid-row-cell-inner",rowCell).html(rowdata[columnname]);$("tr",row).append(rowCell);rowCell.css("width",$(headerCell).css("width"));if(column.align){$(".l-grid-row-cell-inner",rowCell).css({textAlign:column.align})}if($(headerCell).is(":visible")==false){rowCell.hide()}});rowdata.__status="add";row.click(function(e){$(this).siblings(".l-grid-row-selected").removeClass("l-grid-row-selected");$(this).addClass("l-grid-row-selected");if(p.enabledEdit){g.applyEditor(e)}}).hover(function(){$(this).addClass("l-grid-row-over")},function(){$(this).removeClass("l-grid-row-over")});g.isDataChanged=true},getData:function(){if(g.currentData==null){return null}return g.currentData.Rows},getCurrentPageData:function(jsonObj){var data={Rows:new Array(),Total:jsonObj.Rows.length};if(!p.newPage){p.newPage=1}for(i=(p.newPage-1)*p.pageSize;i<jsonObj.Rows.length&&i<p.newPage*p.pageSize;i++){var obj=$.extend({},jsonObj.Rows[i]);data.Rows.push(obj)}return data},getColumn:function(columnname){for(i=0;i<p.columns.length;i++){if(p.columns[i].name==columnname){return p.columns[i]}}return null},getColumnType:function(columnname){for(i=0;i<p.columns.length;i++){if(p.columns[i].name==columnname){if(p.columns[i].type){return p.columns[i].type}return"string"}}return null},compareData:function(data1,data2,columnName,columnType){switch(columnType){case"int":return parseInt(data1[columnName])<parseInt(data2[columnName])?-1:parseInt(data1[columnName])>parseInt(data2[columnName])?1:0;case"float":return parseFloat(data1[columnName])<parseFloat(data2[columnName])?-1:parseFloat(data1[columnName])>parseFloat(data2[columnName])?1:0;case"string":return data1[columnName].localeCompare(data2[columnName]);case"date":return data1[columnName]<data2[columnName]?-1:data1[columnName]>data2[columnName]?1:0}return data1[columnName].localeCompare(data2[columnName])},isTotalSummary:function(){for(var i=0;i<p.columns.length;i++){if(p.columns[i].totalSummary){return true}}return false},bulidTotalSummary:function(){if(!g.isTotalSummary()){return false}if(!g.currentData||g.currentData.Rows.length==0){return false}if(g.gridbody.totalsummary){g.gridbody.totalsummary.remove()}g.gridbody.totalsummary=$("<div class='l-grid-totalsummary'><table class='l-grid-totalsummary-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table></div>");if(!p.usePager){g.gridbody.totalsummary.addClass("l-grid-totalsummary-nobottom")}g.gridbody.append(g.gridbody.totalsummary);$(".l-grid-hd-cell",g.gridheader).each(function(headerCellIndex,headerCell){var cell=$("<td class='l-grid-totalsummary-cell'><div class='l-grid-totalsummary-cell-inner'></div></td>");$("tr",g.gridbody.totalsummary).append(cell);cell.css("width",$(headerCell).css("width"));columnname=$(headerCell).attr("columnname");columnindex=$(headerCell).attr("columnindex");if(!$(this).is(":visible")){cell.hide()}if(columnname){cell.attr({columnname:columnname})}if(!columnindex){return}cell.attr({columnindex:columnindex});var column=p.columns[columnindex];if(column.align){$(".l-grid-totalsummary-cell-inner",cell).css({textAlign:column.align})}if(column.totalSummary){if(column.totalSummary.type){var types=column.totalSummary.type.split(",");var isExist=function(type){for(var i=0;i<types.length;i++){if(types[i].toLowerCase()==type.toLowerCase()){return true}}return false};var sum=0,count=0;var max=parseFloat(g.currentData.Rows[0][column.name]);var min=parseFloat(g.currentData.Rows[0][column.name]);for(var i=0;i<g.currentData.Rows.length;i++){var value=parseFloat(g.currentData.Rows[i][column.name]);sum+=value;count+=1;if(value>max){max=value}if(value<min){min=value}}if(isExist("sum")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>SUM="+sum.toFixed(2)+"</div>")}if(isExist("count")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>Count="+count+"</div>")}if(isExist("max")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>MAX="+max.toFixed(2)+"</div>")}if(isExist("min")){$(".l-grid-totalsummary-cell-inner",cell).append("<div>MIN="+min.toFixed(2)+"</div>")}}}})},changeSort:function(columnName,sortOrder){if(this.loading){return true}if(p.dataAction=="local"){var columnType=g.getColumnType(columnName);if(!g.sortedData){g.sortedData=$.extend({},g.data)}if(p.sortName==columnName){g.sortedData.Rows.reverse()}else{g.sortedData.Rows.sort(function(data1,data2){return g.compareData(data1,data2,columnName,columnType)})}g.currentData=g.getCurrentPageData(g.sortedData);g.showData(g.currentData)}p.sortName=columnName;p.sortOrder=sortOrder;if(p.dataAction=="server"){g.loadData()}},changePage:function(ctype){if(this.loading){return true}if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}switch(ctype){case"first":if(p.page==1){return}p.newPage=1;break;case"prev":if(p.page==1){return}if(p.page>1){p.newPage=parseInt(p.page)-1}break;case"next":if(p.page>=p.pageCount){return}p.newPage=parseInt(p.page)+1;break;case"last":if(p.page>=p.pageCount){return}p.newPage=p.pageCount;break;case"input":var nv=parseInt($(".pcontrol input",this.toolbar).val());if(isNaN(nv)){nv=1}if(nv<1){nv=1}else{if(nv>p.pageCount){nv=p.pageCount}}$(".pcontrol input",this.toolbar).val(nv);p.newPage=nv;break}if(p.newPage==p.page){return false}if(p.onChangePage){p.onChangePage(p.newPage)}if(p.dataAction=="server"){this.loadData()}else{g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}},buildPager:function(){$(".pcontrol input",this.toolbar).val(p.page);$(".pcontrol span",this.toolbar).html(p.pageCount);var r1=parseInt((p.page-1)*p.pageSize)+1;var r2=parseInt(r1)+parseInt(p.pageSize)-1;if(p.total<r2){r2=p.total}var stat=p.pageStatMessage;stat=stat.replace(/{from}/,r1);stat=stat.replace(/{to}/,r2);stat=stat.replace(/{total}/,p.total);$(".l-bar-text",this.toolbar).html(stat)},getSelectedRow:function(){var row=$("> .l-grid-row-selected",g.gridbody);var rowindex=row.attr("rowindex");return g.getRowByRowIndex(parseInt(rowindex))},getRowByRowIndex:function(rowindex){if(g.currentData==null){return null}return g.currentData.Rows[rowindex]},onWindowResize:function(){if($(grid).width()!=0){if(p.gridMinWidth&&p.gridMinWidth>=$(grid).width()){$(".l-grid",g.body).width(p.gridMinWidth)}else{if(g.gridMinWidth>$(grid).width()){$(".l-grid",g.body).width(g.gridMinWidth+10)}else{$(".l-grid",g.body).width("auto")}}}},dragStart:function(dragtype,e,obj){if(dragtype=="colresize"){var columnindex=$(obj).parent().parent().attr("columnindex");if(!columnindex){return}var width=$(obj).parent().parent().width();this.colresize={startX:e.pageX,width:width,columnindex:columnindex};$("body").css("cursor","col-resize");g.draggingline.css({height:g.body.height(),left:e.pageX-$(grid).offset().left+parseInt(g.body[0].scrollLeft),top:0}).show()}$.fn.ligerNoSelect&&$("body").ligerNoSelect()},dragMove:function(e){if(this.colresize){var diff=e.pageX-this.colresize.startX;var newwidth=this.colresize.width+diff;this.colresize.newwidth=newwidth;$("body").css("cursor","col-resize");g.draggingline.css({left:e.pageX-$(grid).offset().left+parseInt(g.body[0].scrollLeft)})}},dragEnd:function(e){if(this.colresize){var mincolumnwidth=80;var columnindex=this.colresize.columnindex;var column=p.columns[columnindex];if(column&&column.minWidth){mincolumnwidth=column.minWidth}var newwidth=this.colresize.newwidth;newwidth=newwidth<mincolumnwidth?mincolumnwidth:newwidth;g.gridMinWidth+=(newwidth-parseInt($(".l-grid-hd-cell[columnindex="+columnindex+"]",this.gridheader).css("width")));$(".l-grid-hd-cell[columnindex="+columnindex+"]",this.gridheader).css("width",newwidth);$("> .l-grid-row,> .l-grid-totalsummary",this.gridbody).each(function(){if($(this).hasClass("l-grid-row")){$(".l-grid-row-cell[columnindex="+columnindex+"]",this).css("width",newwidth)}if(g.isTotalSummary()&&$(this).hasClass("l-grid-totalsummary")){$("td[columnindex="+columnindex+"]",this).css("width",newwidth)}});g.onWindowResize();g.draggingline.hide();this.colresize=false}$("body").css("cursor","default");$.fn.ligerNoSelect&&$("body").ligerNoSelect(false)},onClick:function(e){var obj=(e.target||e.srcElement);var tagName=obj.tagName.toLowerCase();if(g.grideditor.editingCell){if(tagName=="html"||tagName=="body"||$(obj).hasClass("l-grid-scroller")||$(obj).hasClass("l-grid-row")){g.grideditor.html("").hide()}}if(p.showToggleColBtn){if(tagName=="html"||tagName=="body"||$(obj).hasClass("l-grid-scroller")||$(obj).hasClass("l-grid-row")||$(obj).hasClass("l-grid-row-cell-inner")||$(obj).hasClass("l-grid-header")){g.popup.hide()}}},toggleCol:function(columnindex,visible){var headercell=$(".l-grid-hd-cell[columnindex='"+columnindex+"']",this.gridheader);if(!headercell){return}if(visible){headercell.show();$(".l-grid-row-cell[columnindex='"+columnindex+"']",this.gridbody).show()}else{headercell.hide();$(".l-grid-row-cell[columnindex='"+columnindex+"']",this.gridbody).hide()}}};g.header=$(".l-panel-header",grid);g.scroller=$(".l-grid-scroller",grid);g.body=$(".l-panel-body",grid);g.toolbar=$(".l-panel-bar",grid);g.popup=$(".l-grid-popup",grid);g.grideditor=$(".l-grid-editor",grid);g.gridloading=$(".l-grid-loading",grid);g.draggingline=$(".l-grid-dragging-line",grid);g.gridheader=$(".l-grid-header",grid);g.gridbody=$(".l-grid-body",grid);g.currentData=null;grid.manager=g;if(p.showTitle){$(".l-panel-header-text",g.header).html(p.titleMessage)}else{g.header.hide()}if(p.detail&&p.detail.onShowDetail){var detailHeaderCell=$("<td class='l-grid-hd-cell l-grid-hd-cell-detail'><div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text'></div></td>");detailHeaderCell.css({width:29});$("tr",g.gridheader).append(detailHeaderCell)}g.gridMinWidth=0;$(p.columns).each(function(i,item){var $headerCell=$("<td class='l-grid-hd-cell' columnindex='"+i+"'><div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-dropleft'></div><div class='l-grid-hd-cell-dropright'></div><div class='l-grid-hd-cell-text'> </div><div class='l-grid-hd-cell-drophandle'></div></td>");if(i==p.columns.length-1){$(".l-grid-hd-cell-drophandle",$headerCell).remove();$headerCell.addClass("l-grid-hd-cell-last")}if(item.name){$headerCell.attr({columnname:item.name})}if(item.isSort!=undefined){$headerCell.attr({isSort:item.isSort})}if(item.isAllowHide!=undefined){$headerCell.attr({isAllowHide:item.isAllowHide})}var headerText="";if(item.display&&item.display!=""){headerText=item.display}else{if(item.headerRender){headerText=item.headerRender(item)}else{headerText="&nbsp;"}}$(".l-grid-hd-cell-text",$headerCell).html(headerText);$("tr",g.gridheader).append($headerCell);if(item.minWidth){$headerCell.width(item.minWidth);if(item.width&&item.width>item.minWidth){$headerCell.width(item.width)}}else{if(item.width){$headerCell.width(item.width)}else{if(p.columnWidth){$headerCell.width(p.columnWidth)}}}g.gridMinWidth+=(parseInt($headerCell.css("width"))+5)});$("tr .l-grid-hd-cell",g.gridheader).each(function(i,td){if($(this).hasClass("l-grid-hd-cell-detail")){return}var isAllowHide=$(this).attr("isAllowHide");if(isAllowHide!=undefined&&isAllowHide.toLowerCase()=="false"){return}var chk='checked="checked"';var columnindex=$(this).attr("columnindex");var columnname=$(this).attr("columnname");if(!columnindex||!columnname){return}var header=$(".l-grid-hd-cell-text",this).html();if(this.style.display=="none"){chk=""}$("tbody",g.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+chk+' class="l-checkbox" columnindex="'+columnindex+'"/></td><td class="l-column-right">'+header+"</td></tr>")});if($.fn.ligerCheckBox){$("input:checkbox",g.popup).ligerCheckBox({onBeforeClick:function(obj){if(!obj.checked){return true}if($("input:checked",g.popup).length<=p.minColToggle){return false}return true}})}if(!p.isScroll){g.scroller.height("auto")}else{if(p.gridHeight){g.scroller.height(p.gridHeight)}}if(p.width){if(p.width=="auto"){$(grid).width(g.gridMinWidth+10)}else{$(grid).width(p.width)}}if(p.height){$(grid).height(p.height)}g.onWindowResize();g.loadData();if(p.usePager){var optStr="";var selectedIndex=-1;$(p.pageSizeOptions).each(function(i,item){var selectedStr="";if(p.pageSize==item){selectedIndex=i}optStr+="<option value='"+item+"' "+selectedStr+" >"+item+"</option>"});$(".l-bar-selectpagesize",g.toolbar).append("<select name='rp'>"+optStr+"</select>");if(selectedIndex!=-1){$(".l-bar-selectpagesize select",g.toolbar)[0].selectedIndex=selectedIndex}if($.fn.ligerComboBox){$(".l-bar-selectpagesize select",g.toolbar).ligerComboBox({onBeforeSelect:function(){if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}return true},width:45})}}else{g.toolbar.hide()}g.gridloading.html(p.loadingMessage);g.header.click(function(){g.popup.hide();g.grideditor.html("").hide()});$(".l-grid-hd-cell",g.gridheader).hover(function(){if(g.colresize){return false}if(p.showToggleColBtn){if($(this).attr("isAllowHide")!=undefined&&$(this).attr("isAllowHide").toLowerCase()=="false"){return}var btn=$("<div class='l-grid-hd-cell-btn'><span></span></div>");$(".l-grid-hd-cell-inner",this).append(btn);var islast=$(this).hasClass("l-grid-hd-cell-last");btn.click(function(){var left=($(this).offset().left-g.body.offset().left+parseInt(g.body[0].scrollLeft));if(islast){left-=70}g.popup.css({left:left,top:g.gridheader.height()+1});g.popup.toggle()})}return false},function(){$(this).removeClass("l-grid-hd-cell-over");if(p.showToggleColBtn){$(".l-grid-hd-cell-btn",this).remove()}}).click(function(e){if(!$(this).attr("columnname")){return}if($(this).attr("isSort")!=undefined&&$(this).attr("isSort").toLowerCase()=="false"){return}var obj=(e.target||e.srcElement);if(obj.tagName.toLowerCase()=="span"||$(obj).hasClass("l-grid-hd-cell-btn")){return}if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}var sort=$(".l-grid-hd-cell-sort",this);var columnName=$(this).attr("columnname");if(sort.length>0){if(sort.hasClass("l-grid-hd-cell-sort-asc")){sort.removeClass("l-grid-hd-cell-sort-asc");sort.addClass("l-grid-hd-cell-sort-desc");g.changeSort(columnName,"desc")}else{if(sort.hasClass("l-grid-hd-cell-sort-desc")){sort.removeClass("l-grid-hd-cell-sort-desc");sort.addClass("l-grid-hd-cell-sort-asc");g.changeSort(columnName,"asc")}}}else{$(".l-grid-hd-cell-inner",this).append("<div class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'></div>");g.changeSort(columnName,"asc")}$(".l-grid-hd-cell-sort",$(this).siblings()).remove();return false}).mousedown(function(){return false});g.gridheader.click(function(){g.grideditor.html("").hide()});if(p.allowAdjustColWidth){$(".l-grid-hd-cell-drophandle",g.gridheader).mousedown(function(e){g.dragStart("colresize",e,this)})}if(p.showToggleColBtn){$("tr",g.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var onPopupCheckboxChange=function(){if($("input:checked",g.popup).length+1<=p.minColToggle){return false}g.toggleCol($(this).attr("columnindex"),this.checked)};if($.fn.ligerCheckBox){$(":checkbox",g.popup).change(onPopupCheckboxChange)}else{$(":checkbox",g.popup).click(onPopupCheckboxChange)}}$("select",g.toolbar).change(function(){if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}p.newPage=1;p.pageSize=this.value;g.loadData()});$(".pcontrol input",g.toolbar).keydown(function(e){if(e.keyCode==13){g.changePage("input")}});$(".l-bar-button",g.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}).click(function(){if($(this).hasClass("l-bar-btnfirst")){g.changePage("first")}else{if($(this).hasClass("l-bar-btnprev")){g.changePage("prev")}else{if($(this).hasClass("l-bar-btnnext")){g.changePage("next")}else{if($(this).hasClass("l-bar-btnlast")){g.changePage("last")}else{if($(this).hasClass("l-bar-btnload")){if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}g.loadData()}}}}}});g.toolbar.click(function(){g.popup.hide();g.grideditor.html("").hide()});$(document).mousemove(function(e){g.dragMove(e)}).mouseup(function(e){g.dragEnd()}).hover(function(){},function(){g.dragEnd()}).click(function(e){g.onClick(e)});$(window).unload(function(){grid.manager=null});$(window).resize(function(){g.onWindowResize()})};$.ligerGridSetParms=function(p,fixedP){p=$.extend({},$.ligerDefaults.Grid,p);if(p.url&&p.data){p.dataType="local"}else{if(p.url&&!p.data){p.dataType="server"}else{if(!p.url&&p.data){p.dataType="local"}else{if(!p.url&&!p.data){p.dataType="local";p.data=[]}}}}if(p.dataType=="local"){p.dataAction="local"}if(fixedP){p=$.extend(p,fixedP)}return p};$.fn.ligerGrid=function(p){var fixedP={};p=p||{};p=$.ligerGridSetParms(p,fixedP);return this.each(function(){$.ligerAddGrid(this,p)})};$.fn.ligerSimpleGrid=function(p){var fixedP={resizable:false,usePager:false,showTitle:false,showTableToggleBtn:false,showCheckbox:false,showToggleColBtn:false,enabledEdit:false,allowAdjustColWidth:false,onDragCol:false,onToggleCol:false,onChangeSort:false,onSuccess:false,onError:false,onSubmit:false};p=$.ligerGridSetParms(p,fixedP);return this.each(function(){$.ligerAddGrid(this,p)})};$.ligerDefaults=$.ligerDefaults||{};$.ligerDefaults.Grid={errorMessage:"发生错误",pageStatMessage:"显示记录从{from}到{to}，总数 {total} 条",pageTextMessage:"Page",loadingMessage:"加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",titleMessage:"标题",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",width:"auto",columnWidth:120,resizable:true,url:false,usePager:true,page:1,total:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTitle:false,showTableToggleBtn:false,allowAdjustColWidth:true,showCheckbox:true,showToggleColBtn:true,enabledEdit:false,isScroll:true,onDragCol:false,onToggleCol:false,onChangeSort:false,onSuccess:false,onSelectedRow:false,onAfterShowData:false,onError:false,onSubmit:false,dateFormat:"yyyy-MM-dd",renderDate:function(value){var da;if(!value){return null}if(typeof value=="object"){return value}if(value.indexOf("Date")>-1){da=eval("new "+value.replace("/","","g").replace("/","","g"))}else{da=eval('new Date("'+value+'");')}return da}}})(jQuery);(function(A){A.fn.ligerLayout=function(B){B=A.extend({leftWidth:120},B);return this.each(function(){if(this.manager){return}var E={dragStart:function(H,G,F){if(H=="leftresize"){E.leftresize={startX:G.pageX};E.draggingline.css({left:G.pageX-E.layout.offset().left}).show();A("body").css("cursor","col-resize")}A.fn.ligerNoSelect&&A("body").ligerNoSelect()},dragMove:function(G){if(E.leftresize){var F=G.pageX-this.leftresize.startX;E.leftresize.diff=F;E.draggingline.css({left:G.pageX-E.layout.offset().left});A("body").css("cursor","col-resize")}},dragEnd:function(F){if(E.leftresize){E.onDragEnd(E.leftresize.diff);E.draggingline.hide();E.leftresize=false}A("body").css("cursor","default");A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)},onDragEnd:function(G){E.leftWidth+=G;E.rightWidth=E.layout.width()-E.leftWidth-5;E.left.width(E.leftWidth);E.right.width(E.rightWidth);var F=parseInt(E.right.css("left"));var H=parseInt(E.drophandle.css("left"));F+=G;H+=G;E.right.css({left:F});E.drophandle.css({left:H})}};E.layout=A(this);this.manager=E;if(!E.layout.hasClass("l-layout")){E.layout.addClass("l-layout")}E.width=E.layout.width();E.draggingline=A('<div class="l-layout-dragging-line" style="display: none; "></div>');E.collapse=A('<div class="l-layout-collapse" style="display: none; "><div class="l-layout-collapse-toggle"></div></div>');E.drophandle=A('<div class="l-layout-drophandle" style="display: none; "></div>');E.leftContent=A("> div:eq(0)",E.layout);E.rightContent=A("> div:eq(1)",E.layout);E.left=E.leftContent.wrap('<div class="l-layout-left" style="left:0px;"></div>').parent();E.right=E.rightContent.wrap('<div class="l-layout-right"></div>').parent();if(!E.leftContent.hasClass("l-layout-content")){E.leftContent.addClass("l-layout-content")}E.left.header=A('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');E.left.prepend(E.left.header);E.left.header.toggle=A(".l-layout-header-toggle",E.left.header);var D=A(".l-layout-content",E.left).attr("title");if(D){A(".l-layout-content",E.left).attr("title","");A(".l-layout-header-inner",E.left.header).html(D)}E.leftWidth=B.leftWidth;if(E.leftWidth){E.left.width(E.leftWidth)}if(!E.rightContent.hasClass("l-layout-content")){E.rightContent.addClass("l-layout-content")}var C=A(".l-layout-content",E.right).attr("title");if(C){A(".l-layout-content",E.right).attr("title","");E.right.header=A('<div class="l-layout-header">'+C+"</div>");E.right.prepend(E.right.header)}E.right.css({left:E.leftWidth+5});E.rightWidth=E.layout.width()-E.leftWidth-5;if(E.rightWidth){E.right.width(E.rightWidth)}E.drophandle.appendTo(E.layout);E.drophandle.css({left:E.left.width()}).show();E.draggingline.appendTo(E.layout);E.collapse.appendTo(E.layout);E.collapse.toggle=A("> .l-layout-collapse-toggle",E.collapse);E.drophandle.mousedown(function(F){E.dragStart("leftresize",F,this)});E.left.header.toggle.hover(function(){A(this).addClass("l-layout-toggle-over")},function(){A(this).removeClass("l-layout-toggle-over")}).click(function(){E.left.animate({width:0},function(){E.collapse.show();E.left.hide();E.drophandle.hide()});E.right.animate({left:"34px",width:E.layout.width()-40})});E.collapse.hover(function(){A(this).addClass("l-layout-collapse-over")},function(){A(this).removeClass("l-layout-collapse-over")});E.collapse.toggle.hover(function(){A(this).addClass("l-layout-collapse-toggle-over")},function(){A(this).removeClass("l-layout-collapse-toggle-over")});E.collapse.toggle.click(function(){E.left.show();E.collapse.hide();E.drophandle.show();E.left.animate({width:E.leftWidth},function(){});E.right.animate({left:E.leftWidth+5,width:E.layout.width()-E.leftWidth-5},function(){})});A(document).mousemove(function(F){E.dragMove(F)}).mouseup(function(F){E.dragEnd()}).hover(function(){},function(){E.dragEnd()})})}})(jQuery);(function(A){A.ligerMessageBox={};A.ligerMessageBox.show=function(G){G=G||{};G.isDrag==undefined&&(G.isDrag=true);var E="";E+='<div class="l-messagebox">';E+='        <div class="l-messagebox-lt"></div><div class="l-messagebox-rt"></div>';E+='        <div class="l-messagebox-l"></div><div class="l-messagebox-r"></div> ';E+='        <div class="l-messagebox-image"></div>';E+='        <div class="l-messagebox-title">';E+='            <div class="l-messagebox-title-inner"></div>';E+='            <div class="l-messagebox-close"></div>';E+="        </div>";E+='        <div class="l-messagebox-content">';E+="        </div>";E+='        <div class="l-messagebox-buttons"><div class="l-messagebox-buttons-inner">';E+="        </div></div>";E+="    </div>";var H={applyWindowMask:function(){A(".l-window-mask").remove();A("<div class='l-window-mask' style='display: block;'></div>").appendTo(A("body"))},removeWindowMask:function(){A(".l-window-mask").remove()},applyDrag:function(){if(G.isDrag&&A.fn.ligerDrag){D.ligerDrag({handler:".l-messagebox-title"})}},setImage:function(){if(G.type){if(G.type=="success"||G.type=="donne"){A(".l-messagebox-image",D).addClass("l-messagebox-image-donne").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="error"){A(".l-messagebox-image",D).addClass("l-messagebox-image-error").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="warn"){A(".l-messagebox-image",D).addClass("l-messagebox-image-warn").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="question"){A(".l-messagebox-image",D).addClass("l-messagebox-image-question").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:40})}}}}}}};var D=A(E);A("body").append(D);D.close=function(){H.removeWindowMask();D.remove()};G.width&&D.width(G.width);G.title&&A(".l-messagebox-title-inner",D).html(G.title);G.content&&A(".l-messagebox-content",D).html(G.content);if(G.buttons){A(G.buttons).each(function(I,J){var K=A('<div class="l-messagebox-btn"><div class="l-messagebox-btn-l"></div><div class="l-messagebox-btn-r"></div><div class="l-messagebox-btn-inner"></div></div>');A(".l-messagebox-btn-inner",K).html(J.text);A(".l-messagebox-buttons-inner",D).append(K);J.width&&K.width(J.width);J.onclick&&K.click(function(){J.onclick(J,I,D)})});A(".l-messagebox-buttons-inner",D).append("<div class='l-clear'></div>")}var F=D.width();var C=0;A(".l-messagebox-buttons-inner .l-messagebox-btn",D).each(function(){C+=A(this).width()});A(".l-messagebox-buttons-inner",D).css({marginLeft:parseInt((F-C)*0.5)});H.applyWindowMask();H.applyDrag();H.setImage();A(".l-messagebox-btn",D).hover(function(){A(this).addClass("l-messagebox-btn-over");A(".l-messagebox-btn-l",this).addClass("l-messagebox-btn-l-over");A(".l-messagebox-btn-r",this).addClass("l-messagebox-btn-r-over")},function(){A(this).removeClass("l-messagebox-btn-over");A(".l-messagebox-btn-l",this).removeClass("l-messagebox-btn-l-over");A(".l-messagebox-btn-r",this).removeClass("l-messagebox-btn-r-over")});A(".l-messagebox-close",D).hover(function(){A(this).addClass("l-messagebox-close-over")},function(){A(this).removeClass("l-messagebox-close-over")}).click(function(){D.close()})};A.ligerMessageBox.alert=function(C,F,D,E){C=C||"";F=F||C;var G={onclick:function(I,J,H){H.close();if(E){E(I,J,H)}}};p={title:C,content:F,buttons:[{text:"确定",onclick:G.onclick}]};if(D){p.type=D}A.ligerMessageBox.show(p)};A.ligerMessageBox.confirm=function(C,E,F){var D={onclick:function(H,I,G){G.close();if(F){F(I==0)}}};p={type:"question",title:C,content:E,buttons:[{text:"是",onclick:D.onclick},{text:"否",onclick:D.onclick}]};A.ligerMessageBox.show(p)};A.ligerMessageBox.success=function(C,E,D){A.ligerMessageBox.alert(C,E,"success",D)};A.ligerMessageBox.error=function(C,E,D){A.ligerMessageBox.alert(C,E,"error",D)};A.ligerMessageBox.warn=function(C,E,D){A.ligerMessageBox.alert(C,E,"warn",D)};A.ligerMessageBox.question=function(C,D){A.ligerMessageBox.alert(C,D,"question")};function B(){var D="../lib/ligerUI/skins/Aqua/images/";var C=["box/box-btn-done.gif","box/box-btn-error.gif","box/box-btn-l.gif","box/box-btn-l-over.gif","box/box-btn-question.gif","box/box-btn-over.gif","box/box-righttop.gif","box/box-lefttop.gif","box/box-top.gif","box/box-btn-r.gif","box/box-btn-r-over.gif","box/box-btn-warn.gif","box/box-close.gif","box/box-close-over.gif","box/tabs-item-left-bg.gif"];for(i=0;i<C.length;i++){new Image().src=D+C[i]}}B()})(jQuery);(function(A){A.fn.ligerNoSelect=function(B){if(B==null){prevent=true}else{prevent=B}if(prevent){return this.each(function(){if(A.browser.msie||A.browser.safari){A(this).bind("selectstart",function(){return false})}else{if(A.browser.mozilla){A(this).css("MozUserSelect","none");A("body").trigger("focus")}else{if(A.browser.opera){A(this).bind("mousedown",function(){return false})}else{A(this).attr("unselectable","on")}}}})}else{return this.each(function(){if(A.browser.msie||A.browser.safari){A(this).unbind("selectstart")}else{if(A.browser.mozilla){A(this).css("MozUserSelect","inherit")}else{if(A.browser.opera){A(this).unbind("mousedown")}else{A(this).removeAttr("unselectable","on")}}}})}}})(jQuery);(function(A){A.fn.ligerRadio=function(){return this.each(function(){if(this.manager){return}if(A(this).hasClass("l-hidden")){return}var B={};B.input=A(this);B.link=A('<a href="javascript:void(0)" class="l-radio"></a>');B.wrapper=B.input.addClass("l-hidden").wrap('<div class="l-radio-wrapper"></div>').parent();this.manager=B;B.wrapper.prepend(B.link);B.input.change(function(){if(this.checked){B.link.addClass("l-radio-checked");B.link.addClass("l-radio-checkedover")}else{B.link.removeClass("l-radio-checked");B.link.removeClass("l-radio-checkedover");B.link.removeClass("l-radio-over")}return true});B.link.click(function(){if(B.input.attr("disabled")){return false}B.input.trigger("click").trigger("change");var C;if(B.input[0].form){C=B.input[0].form}else{C=document}A("input:radio[name="+B.input[0].name+"]",C).not(B.input).trigger("change");return false}).hover(function(){if(A(this).hasClass("l-radio-checked")){A(this).addClass("l-radio-checkedover")}else{A(this).addClass("l-radio-over")}},function(){A(this).removeClass("l-radio-checkedover");A(this).removeClass("l-radio-over")});this.checked&&B.link.addClass("l-radio-checked")})}})(jQuery);(function(A){A.fn.ligerResizable=function(B){return this.each(function(){B=A.extend({},A.ligerDefaults.Resizable,B||{});var C={init:function(){C.target.append('<div class="l-resizable"></div>');var D=B.handles.split(",");for(var E=0;E<D.length;E++){switch(D[E].replace(/(^\s*)|(\s*$)/g,"")){case"nw":C.target.append('<div class="l-resizable-h-l" direction="nw"></div>');break;case"ne":C.target.append('<div class="l-resizable-h-r" direction="ne"></div>');break;case"n":C.target.append('<div class="l-resizable-h-c" direction="n"></div>');break;case"w":C.target.append('<div class="l-resizable-c-l" direction="w"></div>');break;case"e":C.target.append('<div class="l-resizable-c-r" direction="e"></div>');break;case"sw":C.target.append('<div class="l-resizable-f-l" direction="sw"></div>');break;case"se":C.target.append('<div class="l-resizable-f-r" direction="se"></div>');break;case"s":C.target.append('<div class="l-resizable-f-c" direction="s"></div>');break}}A("> .l-resizable-h-c , > .l-resizable-f-c",C.target).width(C.target.width());A("> .l-resizable-c-l , > .l-resizable-c-r",C.target).height(C.target.height());C.target.resizable=A("> .l-resizable",C.target)},start:function(F,D){A.fn.ligerNoSelect&&A("body").ligerNoSelect();A(".l-window-mask-nobackground").remove();A("<div class='l-window-mask-nobackground' style='display: block;'></div>").appendTo(A("body"));C.target.resizable.css({width:C.target.width(),height:C.target.height(),left:0,top:0});var E=C.target[0];C.current={dir:D,left:C.target.offset().left,top:C.target.offset().top,width:C.target.width(),height:C.target.height()};A(document).bind("mouseup",C.stop);A(document).bind("mousemove",C.drag);C.target.resizable.show();if(B.onStartResize){B.onStartResize(C.current,F)}},drag:function(J){var F=C.current.dir;var D=C.target.resizable[0];var G=C.current.width;var E=C.current.height;var I=(J.pageX||J.screenX)-C.current.left;var H=(J.pageY||J.clientY)-C.current.top;if(F.indexOf("e")>=0){I-=G}if(F.indexOf("s")>=0){H-=E}if(F!="n"&&F!="s"){G+=(F.indexOf("w")>=0)?-I:I}if(G>=B.minWidth){if(F.indexOf("w")>=0){D.style.left=I+"px"}if(F!="n"&&F!="s"){D.style.width=G+"px"}}if(F!="w"&&F!="e"){E+=(F.indexOf("n")>=0)?-H:H}if(E>=B.minHeight){if(F.indexOf("n")>=0){D.style.top=H+"px"}if(F!="w"&&F!="e"){D.style.height=E+"px"}}C.current.newWidth=G;C.current.newHeight=E;C.current.diffTop=parseInt(D.style.top);if(isNaN(C.current.diffTop)){C.current.diffTop=0}C.current.diffLeft=parseInt(D.style.left);if(isNaN(C.current.diffLeft)){C.current.diffLeft=0}A("body").css("cursor",F+"-resize");if(B.onResize){B.onResize(C.current,J)}},stop:function(D){A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(".l-window-mask-nobackground").remove();if(!B.onStopResize){C.applyResize()}else{if(B.onStopResize(C.current,D)!=false){C.applyResize()}}A("body").css("cursor","");C.target.resizable.hide();A(document).unbind("mousemove",C.drag);A(document).unbind("mouseup",C.stop)},applyResize:function(){var D=0;var E=0;if(!isNaN(parseInt(C.target.css("top")))){D=parseInt(C.target.css("top"))}if(!isNaN(parseInt(C.target.css("left")))){E=parseInt(C.target.css("left"))}if(C.current.diffTop!=undefined){if(C.current.diffTop!=0){C.target.css({top:D+C.current.diffTop})}if(C.current.diffLeft!=0){C.target.css({left:E+C.current.diffLeft})}C.target.css({width:C.current.newWidth,height:C.current.newHeight})}}};C.target=A(this);C.init();A(">div",C.target).mousedown(function(D){if(!A(this).attr("direction")){return}C.start(D,A(this).attr("direction"));return false})})};A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2000,maxHeight:2000,minWidth:20,minHeight:20,onStartResize:function(B){},onResize:function(B){},onStopResize:function(B){}}})(jQuery);(function(A){A.fn.ligerSpinner=function(B){B=B||{};B=A.extend({type:"float",isNegative:true,decimalplace:2,step:0.1,interval:50,onChangeValue:false},B);if(B.type=="float"){B.step=0.1;B.interval=50}else{if(B.type=="int"){B.step=1;B.interval=100}else{if(B.type=="time"){B.step=1;B.interval=100}}}return this.each(function(){if(this.manager){return}var C={round:function(E,F){var D=1;for(;F>0;D*=10,F--){}for(;F<0;D/=10,F++){}return Math.round(E*D)/D},isInt:function(D){var E=B.isNegative?/^-?\d+$/:/^\d+$/;if(!E.test(D)){return false}if(parseFloat(D)!=D){return false}return true},isFloat:function(D){var E=B.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;if(!E.test(D)){return false}if(parseFloat(D)!=D){return false}return true},isTime:function(E){var D=E.match(/^(\d{1,2}):(\d{1,2})$/);if(D==null){return false}if(D[1]>24||D[2]>60){return false}return true},isVerify:function(D){if(B.type=="float"){return C.isFloat(D)}else{if(B.type=="int"){return C.isInt(D)}else{if(B.type=="time"){return C.isTime(D)}}}return false},getVerifyValue:function(E){var D=null;if(B.type=="float"){D=C.round(E,B.decimalplace)}else{if(B.type=="int"){D=parseInt(E)}else{if(B.type=="time"){D=E}}}if(!C.isVerify(D)){return C.value}else{return D}},getDefaultValue:function(){if(B.type=="float"||B.type=="int"){return 0}else{if(B.type=="time"){return"00:00"}}},addValue:function(E){var D=C.inputText.val();D=parseFloat(D)+E;C.inputText.val(D);C.inputText.trigger("change")},addTime:function(F){var D=C.inputText.val();var E=D.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(E[2])+F;if(newminute<10){newminute="0"+newminute}D=E[1]+":"+newminute;C.inputText.val(D);C.inputText.trigger("change")},uping:function(){if(B.type=="float"||B.type=="int"){C.addValue(B.step)}else{if(B.type=="time"){C.addTime(B.step)}}},downing:function(){if(B.type=="float"||B.type=="int"){C.addValue(-1*B.step)}else{if(B.type=="time"){C.addTime(-1*B.step)}}},isDateTime:function(E){var D=E.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(D==null){return false}var F=new Date(D[1],D[3]-1,D[4]);if(F=="NaN"){return false}return(F.getFullYear()==D[1]&&(F.getMonth()+1)==D[3]&&F.getDate()==D[4])},isLongDateTime:function(F){var E=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var D=F.match(E);if(D==null){return false}var G=new Date(D[1],D[3]-1,D[4],D[5],D[6]);if(G=="NaN"){return false}return(G.getFullYear()==D[1]&&(G.getMonth()+1)==D[3]&&G.getDate()==D[4]&&G.getHours()==D[5]&&G.getMinutes()==D[6])},interval:null,inputText:null,value:null,textFieldID:""};this.manager=C;if(this.tagName.toLowerCase()=="input"&&this.type&&this.type=="text"){C.inputText=A(this);if(this.id){C.textFieldID=this.id}}else{C.inputText=A('<input type="text"/>');C.inputText.appendTo(A(this))}if(C.textFieldID==""&&B.textFieldID){C.textFieldID=B.textFieldID}C.link=A('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>');C.wrapper=C.inputText.wrap('<div class="l-text"></div>').parent();C.wrapper.append(C.link).after(C.selectBox).after(C.valueField);C.link.up=A(".l-spinner-up",C.link);C.link.down=A(".l-spinner-down",C.link);if(!C.inputText.hasClass("l-text-field")){C.inputText.addClass("l-text-field")}if(B.width){C.wrapper.css({width:B.width});C.inputText.css({width:B.width-20})}if(B.height){C.wrapper.height(B.height);C.inputText.height(B.height-2);C.link.height(B.height-4)}if(!C.isVerify(C.inputText.val())){C.value=C.getDefaultValue();C.inputText.val(C.value)}C.link.up.hover(function(){A(this).addClass("l-spinner-up-over")},function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(this).removeClass("l-spinner-up-over")}).mousedown(function(){C.interval=setInterval(C.uping,B.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect()}).mouseup(function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)});C.link.down.hover(function(){A(this).addClass("l-spinner-down-over")},function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(this).removeClass("l-spinner-down-over")}).mousedown(function(){C.interval=setInterval(C.downing,B.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect()}).mouseup(function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)});C.inputText.change(function(){var D=C.inputText.val();C.value=C.getVerifyValue(D);if(B.onChangeValue){B.onChangeValue(C.value)}C.inputText.val(C.value)})})}})(jQuery);(function(A){A.fn.ligerTab=function(B){B=B||{};return this.each(function(){if(this.manager){return}if(A(this).hasClass("l-hidden")){return}var D={};this.manager=D;D.tabs=A(this);if(!D.tabs.hasClass("l-tab")){D.tabs.addClass("l-tab")}var C=0;if(A("> div[lselected=true]",D.tabs).length>0){C=A("> div",D.tabs).index(A("> div[lselected=true]",D.tabs))}D.tabs.ul=A('<ul class="l-tab-header"></ul>');A("> div",D.tabs).each(function(G,F){var E=A("<li><span></span></li>");if(G==C){A("span",E).addClass("l-selected")}if(A(F).attr("title")){A("span",E).html(A(F).attr("title"))}D.tabs.ul.append(E);if(!A(F).hasClass("l-tab-panelbox")){A(F).addClass("l-tab-panelbox")}});D.tabs.ul.prependTo(D.tabs);A(".l-tab-panelbox:eq("+C+")",D.tabs).show().siblings(".l-tab-panelbox").hide();A("> ul:first span",D.tabs).click(function(){if(A(this).hasClass("l-selected")){return}var E=A("> ul:first span",D.tabs).index(this);A(this).addClass("l-selected").parent().siblings().find("span.l-selected").removeClass("l-selected");A(".l-tab-panelbox:eq("+E+")",D.tabs).show().siblings(".l-tab-panelbox").hide()}).not("l-selected").hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")})})}})(jQuery);(function(A){A.fn.ligerTextBox=function(B){return this.each(function(){B=B||{};B=A.extend({onBeforeInput:false,onInputed:false,onChangeValue:false,selectedText:false,selectedValue:false,width:false,nullText:null},B);if(this.manager){return}var C={};this.manager=C;C.inputText=A(this);C.wrapper=C.inputText.wrap('<div class="l-text"></div>').parent();if(!C.inputText.hasClass("l-text-field")){C.inputText.addClass("l-text-field")}if(!B.width){if(C.inputText.attr("lwidth")){B.width=parseInt(C.inputText.attr("lwidth"))}}if(B.width){C.wrapper.css({width:B.width});C.inputText.css({width:B.width-2})}if(B.height){C.wrapper.height(B.height);C.inputText.height(B.height-2)}C.nullText=B.nullText;if(C.nullText==null){if(C.inputText.attr("nulltext")){C.nullText=C.inputText.attr("nulltext")}}if(this.value==""){if(C.nullText!=null){this.value=C.nullText}A(this).addClass("l-text-field-null")}C.inputText.blur(function(){if(this.value==""){if(C.nullText!=null){this.value=C.nullText}A(this).addClass("l-text-field-null")}else{A(this).removeClass("l-text-field-null")}}).focus(function(){if(A(this).hasClass("l-text-field-null")){this.value="";A(this).removeClass("l-text-field-null")}}).change(function(){if(B.onChangeValue){B.onChangeValue(this.value)}})})}})(jQuery);(function(A){A.fn.ligerTree=function(B){B=B||{};B.data=B.data||{};return this.each(function(){if(this.manager){return}if(!A(this).hasClass("l-tree")){A(this).addClass("l-tree")}var C={onLinkClick:function(D,F){var E=D.nextAll().get();for(i=0;i<E.length;i++){if(parseInt(A(E[i]).attr("treelevel"))>F.treelevel){if(D.icon.hasClass("l-tree-icon-folder")){A(E[i]).show()}else{A(E[i]).hide()}}else{break}}if(D.link.hasClass("l-tree-status-open")){D.link.removeClass("l-tree-status-open").addClass("l-tree-status-close")}else{if(D.link.hasClass("l-tree-status-close")){D.link.removeClass("l-tree-status-close").addClass("l-tree-status-open")}}if(D.icon.hasClass("l-tree-icon-folder")){D.icon.removeClass("l-tree-icon-folder").addClass("l-tree-icon-folderopen")}else{if(D.icon.hasClass("l-tree-icon-folderopen")){D.icon.removeClass("l-tree-icon-folderopen").addClass("l-tree-icon-folder")}}}};C.tree=A(this);this.manager=C;A(B.data).each(function(E,F){var D=A("<div class='l-tree-node'><div class='l-tree-node-inner'><div class='l-tree-node-link'></div><div class='l-tree-node-icon'></div><div class='l-tree-node-text'></div></div></div>");D.link=A(".l-tree-node-link",D);D.icon=A(".l-tree-node-icon",D);D.text=A(".l-tree-node-text",D);D.attr({treelevel:F.treelevel});D.attr({isleaf:F.isleaf});D.css({paddingLeft:18*(F.treelevel-1)});D.text.html(F.text);if(F.isleaf){D.icon.addClass("l-tree-icon-level")}else{D.link.addClass("l-tree-status-open");D.icon.addClass("l-tree-icon-folderopen")}C.tree.append(D);D.click(function(G){var H=(G.target||G.srcElement);if(A(H).hasClass("l-tree-node-link")){return}if(!A(this).hasClass("l-tree-node-selected")){A(this).addClass("l-tree-node-selected");A(this).siblings().removeClass("l-tree-node-selected")}if(B.callback){B.callback(F,D)}});D.link.click(function(){C.onLinkClick(D,F)}).hover(function(){if(A(this).hasClass("l-tree-status-open")){A(this).addClass("l-tree-status-open-over")}else{if(A(this).hasClass("l-tree-status-close")){A(this).addClass("l-tree-status-close-over")}}},function(){A(this).removeClass("l-tree-status-open-over").removeClass("l-tree-status-close-over")})})})}})(jQuery);(function(A){A.fn.ligerApplyWindow=function(B){return this.each(function(){B=B||{};var C={};C.window=A('<div class="l-window"><div class="l-window-header"><div class="l-window-header-buttons"><div class="l-window-toggle"></div><div class="l-window-close"></div><div class="l-clear"></div></div><div class="l-window-header-inner"></div></div><div class="l-window-content"></div></div>');C.window.content=A(".l-window-content",C.window);C.window.header=A(".l-window-header",C.window);A(this).appendTo(C.window.content);A.ligerWindow.switchWindow(C.window[0]);A("body").append(C.window);B.left&&C.window.css("left",B.left);B.right&&C.window.css("right",B.right);B.top&&C.window.css("top",B.top);B.bottom&&C.window.css("bottom",B.bottom);B.width&&C.window.width(B.width);B.height&&C.window.content.height(B.height-28);B.title&&A(".l-window-header-inner",C.window.header).html(B.title);B.framename&&A(">iframe",C.window.content).attr("name",B.framename);if(A.fn.ligerDrag){C.window.ligerDrag({handler:".l-window-header",onStartDrag:function(){A.ligerWindow.switchWindow(C.window[0]);C.window.addClass("l-window-dragging")},onStopDrag:function(){C.window.removeClass("l-window-dragging")}})}if(A.fn.ligerResizable){C.window.ligerResizable({onStartResize:function(){A.ligerWindow.switchWindow(C.window[0])},onStopResize:function(D,G){var E=0;var F=0;if(!isNaN(parseInt(C.window.css("top")))){E=parseInt(C.window.css("top"))}if(!isNaN(parseInt(C.window.css("left")))){F=parseInt(C.window.css("left"))}if(D.diffTop!=undefined){C.window.css({top:E+D.diffTop,left:F+D.diffLeft,width:D.newWidth});C.window.content.height(D.newHeight-28)}return false}});C.window.append("<div class='l-btn-nw-drop'></div>")}A(".l-window-toggle",C.window).click(function(){if(A(this).hasClass("l-window-toggle-close")){A(this).removeClass("l-window-toggle-close")}else{A(this).addClass("l-window-toggle-close")}C.window.content.slideToggle()});A(".l-window-close",C.window).click(function(){C.window.hide()})})};A.ligerWindow={};A.ligerWindow.switchWindow=function(B){A(B).css("z-index","101").siblings(".l-window").css("z-index","100")};A.ligerWindow.show=function(E){E=E||{};if(E.url){var C=A("<iframe frameborder='0' src='"+E.url+"'></iframe>");var D="window"+new Date().getTime();if(E.name){D=E.name}C.attr("name",D);E.framename=D;C.ligerApplyWindow(A.extend({},E))}else{if(E.content){var B=A("<div>"+E.content+"</div>");B.ligerApplyWindow(A.extend({},E))}}}})(jQuery);